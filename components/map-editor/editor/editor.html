
<section class="editor-component">
    <style>
        @scope (.editor-component) {
            :scope {
                display: flex;
                flex-direction: column;
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                bottom: 0;
            }

            .button-content {
                display: flex;
                white-space: nowrap;
                align-items: center;
                padding: 2px;
            }

            .icon-container {
                height: 20px;
                width: 20px;
                margin: 2px 2px 8px 2px;
            }
            /* menu - start */
            #menu, #toolbar {
                display: flex;
                flex-direction: row;
                background: linear-gradient(90deg, var(--theme-color-secondary) var(--editor-tool-width), var(--theme-color-secondary-lightest) 75%);
                border-bottom: 1px solid var(--theme-color-secondary-darkest-fixed)
            }

            .dropdown-content {
                display: none;
                position: absolute;
                margin-left: 2px;
                min-width: 160px;
                border-bottom: 1px solid var(--theme-color-secondary-darkest-fixed);
                border-left: 1px solid var(--theme-color-secondary-darkest-fixed);
                border-right: 1px solid var(--theme-color-secondary-darkest-fixed);
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
            }

            .dropdown-content button {
                display: flex;
                padding: 3px;
            }

            .dropdown-content a {
                margin: 10px;
                display: block;
            }

            .dropdown-content hr {
                border: none;
                height: 1px;
                margin-left: 10px;
                margin-right: 10px;
                background-color: var(--theme-color-secondary-darker);
            }

            .top-menu-item {
                padding: 10px;
            }

            .button-text {
                padding-left: 10px;
            }

            .show {
                display: block;
            }
            /* menu - end */
            /* toolbar - start */
            #toolbar {
                padding-left: 5px;
                flex-wrap: wrap;
            }

            #toolbar .toolbar-group {
                padding-right: 5px;
            }

            #toolbar .group-divider {
                border-right: 1px dotted var(--theme-color-secondary-darker);
                width: 1px;
                height: 15px;
                margin-right: -10px;
                display: inline-block;
            }
            /* toolbar - end */
            /* tools - start */
            #tools-and-map {
                display: flex;
            }

            #tools {
                flex: 0 0 var(--editor-tool-width);
                height: 100%;
                border-right: 1px solid var(--theme-color-secondary-darkest-fixed);
                display: none;
                margin-left: var(--editor-tool-left);
                transition: margin-left 0.5s;
            }

            #pinned-icon.pinned {
                border-bottom: 1px solid var(--theme-color-secondary-darker);
            }

            #tools .icon-container {
                margin: 0;
                margin: 2px 2px 2px 2px;
            }

            #tools.has-map {
                display: block;
            }

            #tools header {
                padding: 5px;
                display: flex;
            }

            #tools header .spacer {
                flex-grow: 4;
            }

            #tools-header {
                font-weight: bolder;
                border-bottom: 3px double var(--theme-color-tertiary-darkest-fixed);
            }

            .tool-types {
                padding-bottom: 20px;
            }

            .tool-types header {
                border-bottom: 1px solid var(--theme-color-secondary-darkest-fixed);
            }

            .tool-button {
                padding: 4px 4px 2px 4px;
            }

            .tool-button.active {
                box-shadow: var(--theme-color-secondary-darkest) 1px 1px 3px 0 inset, var(--theme-color-secondary-darkest) -1px -1px 3px 0 inset;
            }

            #tools .icon {
                stroke-width: 2px;
            }
            /* tools - end */
            /* canvas - start */
            #map-container {
                overflow: auto;
            }

            #map-canvas {
                display: none;
                border: 1px solid var(--theme-color-secondary);
                touch-action: none;
            }

            @media (max-width: 768px), (max-height: 500px) {
                #map-canvas {

                    margin-top: 40px;
                    margin-left: 40px;
                }
            }

            #no-map {
                display: block;
                margin-top: 40px;
                margin-left: 40px;
            }

            #map-container.has-map #map-canvas {
                display: block;
            }

            #map-container.has-map #no-map {
                display: none;
            }
            /* canvas - end */
        }
    </style>
    <div id="menu" class="surface-secondary">
        <div>
            <button onclick="#model.toggleDropdown('menu-file')" class="dropbtn top-menu-item action-text" data-dropdown-id="menu-file">File</button>
            <div id="menu-file" class="dropdown-content surface-secondary">
                <button title="New map" class="action-text" onclick="#model.showDialog('file-new-dialog-component')">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/file-new.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">New ...</div>
                    </div>
                </button>
                <button title="Open map" class="action-text" onclick="#model.showDialog('file-open-dialog-component')" data-kit-add-attributes="%{#model.isOpenDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/file-open.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Open ...</div>
                    </div>
                </button>
                <button title="Close map" class="action-text" onclick="#model.closeMap()" data-kit-add-attributes="%{#model.isCloseDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/file-close.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Close</div>
                    </div>
                </button>
                <hr />
                <button title="Save map" class="action-text" onclick="#model.saveMap()" data-kit-add-attributes="%{#model.isSaveDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/file-save.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Save</div>
                    </div>
                </button>
                <button title="Save map as" class="action-text" data-kit-add-attributes="%{#model.isSaveDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/file-save-as.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Save as ...</div>
                    </div>
                </button>
                <button title="Publish file" class="action-text">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/file-publish.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Publish ...</div>
                    </div>
                </button>
            </div>
        </div>
        <div>
            <button onclick="#model.toggleDropdown('menu-edit')" class="dropbtn top-menu-item action-text" data-dropdown-id="menu-edit">Edit</button>
            <div id="menu-edit" class="dropdown-content surface-secondary">
                <button title="Undo" class="action-text" data-kit-add-attributes="%{#model.isUndoDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-undo.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Undo</div>
                    </div>
                </button>
                <button title="Redo" class="action-text" data-kit-add-attributes="%{#model.isRedoDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-redo.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Redo</div>
                    </div>
                </button>
                <hr />
                <button title="Cut" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-cut.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Cut</div>
                    </div>
                </button>
                <button title="Copy" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-copy.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Copy</div>
                    </div>
                </button>
                <button title="Paste" class="action-text" data-kit-add-attributes="%{#model.isPasteDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-paste.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Paste</div>
                    </div>
                </button>
                <button title="Delete" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-delete.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Delete</div>
                    </div>
                </button>
                <hr />
                <button title="Edit selections" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/edit-edit-selections.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Edit selections ...</div>
                    </div>
                </button>
            </div>
        </div>
        <div>
            <button onclick="#model.toggleDropdown('menu-view')" class="dropbtn top-menu-item action-text" data-dropdown-id="menu-view">View</button>
            <div id="menu-view" class="dropdown-content surface-secondary">
                <button title="Zoom" class="action-text" data-kit-add-attributes="%{#model.isZoomDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/view-zoom.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Zoom ...</div>
                    </div>
                </button>
                <button title="Resize canvas" class="action-text" data-kit-add-attributes="%{#model.isResizeCanvasDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/view-resize-canvas.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Resize canvas ...</div>
                    </div>
                </button>
                <button title="Overlay" class="action-text" data-kit-add-attributes="%{#model.isOverlayDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/view-overlay.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Overlay ...</div>
                    </div>
                </button>
                <hr />
                <button title="Read-only viewer" class="action-text" data-kit-add-attributes="%{#model.isReadOnlyViewerDisabled()}%">
                    <div class="button-content">
                        <div class="icon-container">
                            <kit-component data-kit-template-path="/resources/icons/view-read-only-viewer.html" data-kit-model="null"></kit-component>
                        </div>
                        <div class="button-text">Read-only viewer ...</div>
                    </div>
                </button>
            </div>
        </div>
    </div>
    <div id="toolbar" class="surface-secondary">
        <div class="toolbar-group">
            <div class="group-divider"></div>
            <button title="New map" class="action-text" onclick="#model.showDialog('file-new-dialog-component')">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/file-new.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Open map" class="action-text" onclick="#model.showDialog('file-open-dialog-component')" data-kit-add-attributes="%{#model.isOpenDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/file-open.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Save map" class="action-text" onclick="#model.saveMap()" data-kit-add-attributes="%{#model.isSaveDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/file-save.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
        </div>
        <div class="toolbar-group">
            <div class="group-divider"></div>
            <button title="Undo" class="action-text" data-kit-add-attributes="%{#model.isUndoDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-undo.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Redo" class="action-text" data-kit-add-attributes="%{#model.isRedoDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-redo.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Cut" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-cut.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Copy" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-copy.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Paste" class="action-text" data-kit-add-attributes="%{#model.isPasteDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-paste.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Delete" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-delete.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Edit selections" class="action-text" data-kit-add-attributes="%{#model.isEditSelectionDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/edit-edit-selections.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
        </div>
        <div class="toolbar-group">
            <div class="group-divider"></div>
            <button title="Zoom" class="action-text" data-kit-add-attributes="%{#model.isZoomDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/view-zoom.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Resize canvas" class="action-text" data-kit-add-attributes="%{#model.isResizeCanvasDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/view-resize-canvas.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
            <button title="Overlay" class="action-text" data-kit-add-attributes="%{#model.isOverlayDisabled()}%">
                <div class="button-content">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/view-overlay.html" data-kit-model="null"></kit-component>
                    </div>
                </div>
            </button>
        </div>
    </div>
    <div id="tools-and-map">
        <div id="tools" class="surface-secondary background">
            <header id="tools-header" class="surface-secondary">
                <div>Tools</div>
                <div class="spacer"></div>
                <button title="Edit tools" class="action-text">
                    <div>...</div>
                </button>
                <button title="Pin tool palette" class="action-text" onclick="#model.toggleToolsPinned()">
                    <div id="pinned-icon" class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/pin.html" data-kit-model="null"></kit-component>
                    </div>
                </button>
            </header>
            <section>
                <div class="surface-secondary background tool-types">
                    <header class="surface-secondary">
                        <div>Editing tools</div>
                        <div class="spacer"></div>
                        <button title="Reset tools" class="action-text" onclick="#model.onToolReset()">
                            <div class="icon-container">
                                <kit-component data-kit-template-path="/resources/icons/reset.html" data-kit-model="null"></kit-component>
                            </div>
                        </button>
                    </header>
                    <section>
                        <kit-array data-kit-array="#model.getToolPalettes('EditingTools')" data-kit-array-ref="palettes" data-kit-item-index-ref="paletteIndex">
                            <div>
                                <kit-array data-kit-array="#model.getToolPaletteItems('EditingTools', #paletteIndex)" data-kit-item-ref="tool">
                                    <button id="%{#tool.id}%"
                                            onclick="#model.onToolSelected(#tool.id, #tool.data.ref)"
                                            class="tool-button action-control editing-tool-button"
                                            title="%{#tool.data.ref.name}%">
                                        %{#tool.data.thumbnailSrc}%
                                    </button>
                                </kit-array>
                            </div>
                        </kit-array>
                    </section>
                </div>
                <div id="drawing-tools" class="surface-secondary background tool-types">
                    <header class="surface-secondary">
                        <div>Drawing tools</div>
                        <div class="spacer"></div>
                        <button title="Reset tools" class="action-text" onclick="#model.onToolReset()">
                            <div class="icon-container">
                                <kit-component data-kit-template-path="/resources/icons/reset.html" data-kit-model="null"></kit-component>
                            </div>
                        </button>
                    </header>
                    <section>
                        <kit-array data-kit-array="#model.getToolPalettes('DrawingTools')" data-kit-item-index-ref="paletteIndex">
                            <div>
                                <kit-array data-kit-array="#model.getToolPaletteItems('DrawingTools', #paletteIndex)" data-kit-item-ref="tool">
                                    <button id="%{#tool.id}%"
                                            onclick="#model.onToolSelected(#tool.id, #tool.data.ref)"
                                            class="tool-button action-control drawing-tool-button"
                                            title="%{#tool.data.ref.name}%">
                                        %{#tool.data.thumbnailSrc}%
                                    </button>
                                </kit-array>
                            </div>
                        </kit-array>
                    </section>
                </div>
                <div id="map-item-templates" class="surface-secondary background tool-types">
                    <header class="surface-secondary">
                        <div>Map item templates</div>
                        <div class="spacer"></div>
                        <button title="Reset map item templates" class="action-text" onclick="#model.onMapItemTemplateReset()">
                            <div class="icon-container">
                                <kit-component data-kit-template-path="/resources/icons/reset.html" data-kit-model="null"></kit-component>
                            </div>
                        </button>
                    </header>
                    <section>
                        <kit-array data-kit-array="#model.getToolPalettes('MapItemTemplates')" data-kit-item-index-ref="paletteIndex">
                            <div>
                                <kit-array data-kit-array="#model.getToolPaletteItems('MapItemTemplates', #paletteIndex)" data-kit-item-ref="mapItemTemplate">
                                    <button id="%{#mapItemTemplate.id}%"
                                            onclick="#model.onMapItemTemplateSelected(#mapItemTemplate.id, #mapItemTemplate.data.ref)"
                                            class="tool-button action-control map-item-template-button"
                                            title="%{#mapItemTemplate.data.ref.name}%">
                                        %{#mapItemTemplate.data.thumbnailSrc}%
                                    </button>
                                </kit-array>
                            </div>
                        </kit-array>
                    </section>
                </div>
            </section>
        </div>
        <div id="map-container" class="surface-secondary background">
            <canvas id="map-canvas" width="1200" height="750"></canvas>
            <div id="no-map">[No map]</div>
        </div>
    </div>
    <kit-component id="file-new-dialog-component" data-kit-template-path="/components/map-editor/file-new-dialog/file-new-dialog.html"></kit-component>
    <kit-component id="file-save-dialog-component" data-kit-template-path="/components/map-editor/file-save-dialog/file-save-dialog.html"></kit-component>
    <kit-component id="file-open-dialog-component" data-kit-template-path="/components/map-editor/file-open-dialog/file-open-dialog.html"></kit-component>
</section>
