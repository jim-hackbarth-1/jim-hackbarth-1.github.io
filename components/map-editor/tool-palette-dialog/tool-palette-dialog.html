
<dialog class="tool-palette-dialog-component surface-tertiary background">
    <kit-if id="kitIfVisible" data-kit-condition="#model.isVisible()">
        <style>
            @scope (.tool-palette-dialog-component) {
                :scope {
                    height: 750px;
                    width: 1000px;
                    border: 1px solid var(--theme-color-tertiary-darkest);
                }

                .details-list {
                    height: 665px;
                    overflow-y: auto;
                    padding: 2px;
                    border: 1px solid var(--theme-color-tertiary-darkest-fixed);
                    border-radius: 3px;
                }

                .details-list summary {
                    font-weight: bold;
                }

                .details-list-2 {
                    overflow-y: auto;
                    padding: 0 0 2px 20px;
                    border-radius: 3px;
                }

                .details-list-2 summary {
                    font-weight: normal;
                }

                .detail-section {
                    display: flex;
                    padding-right: 0;
                }

                .detail-section > div {
                    flex-grow: 1;
                }

                .item-list {
                    min-height: 50px;
                    max-height: 300px;
                    overflow-y: auto;
                    padding: 2px;
                    border: 1px solid var(--theme-color-tertiary-darkest-fixed);
                    border-radius: 3px;
                    margin-right: 10px;
                }

                .tools-list,
                .map-item-templates-list,
                .fills-list,
                .strokes-list {
                    margin-right: 0;
                }

                .available-item {
                    display: flex;
                    padding: 0;
                    margin-bottom: 2px;
                }

                .available-item div {
                    padding: 0;
                    margin: 0;
                }

                .available-item label {
                    display: block;
                    margin: 5px;
                }

                .tool-item,
                .map-item-template-item,
                .fill-item,
                .stroke-item {
                    display: flex;
                    align-items: center;
                    padding: 0;
                    margin: 2px;
                    cursor: pointer;
                    font-family: var(--app-font-family);
                    outline: none;
                    border-radius: 3px;
                    border: 1px solid;
                    background-color: var(--theme-color-tertiary);
                    color: var(--theme-color-tertiary-darkest);
                    border-color: var(--theme-color-tertiary-darkest-fixed);
                }

                .tool-item:hover,
                .map-item-template-item:hover,
                .fill-item:hover,
                .stroke-item:hover {
                    background-color: var(--theme-color-tertiary-lighter);
                }

                .tool-item[data-selected="true"],
                .map-item-template-item[data-selected="true"],
                .fill-item[data-selected="true"],
                .stroke-item[data-selected="true"] {
                    background-color: var(--theme-color-tertiary-darker);
                    color: var(--theme-color-tertiary-lightest);
                    box-shadow: var(--theme-color-tertiary-lightest) 1px 1px 3px 0 inset, var(--theme-color-tertiary-lightest) -1px -1px 3px 0 inset;
                }

                .tool-item div,
                .map-item-template-item div,
                .fill-item div.
                .stroke-item div {
                    margin: 2px;
                }

                .tool-item label,
                .map-item-template-item label,
                .fill-item label,
                .stroke-item label {
                    display: block;
                    margin: 2px;
                }

                .secondary-info {
                    font-size: smaller;
                    font-style: italic;
                    padding: 0;
                }

                .secondary-info label {
                    font-weight: normal;
                    margin: 5px 0 0 0;
                }

                .tool-item .secondary-info label,
                .map-item-template-item .secondary-info label,
                .fill-item .secondary-info label,
                .stroke-item .secondary-info label {
                    margin: 5px 2px 0 0;
                }

                .map-item-template-item .icon-container,
                .fill-item .icon-container,
                .stroke-item .icon-container {
                    margin-bottom: 10px;
                }

                .move-container button {
                    margin-left: -10px;
                    padding: 0;
                    height:50px;
                    width:30px;
                }

                .move-container button .icon-container {
                    margin-left: 5px;
                    margin-bottom: 30px;
                }

                button, .icon-container {
                    min-width: 25px;
                }

                .grip {
                    stroke: var(--theme-color-tertiary-darker);
                    stroke-width: 2;
                }

                .action-text:not([disabled]):hover .grip,
                .action-control:not([disabled]):hover .grip {
                    stroke: var(--theme-color-tertiary-lightest);
                }

                .list-label-row {
                    display: flex;
                    padding: 0;
                    margin: 0;
                }

                .list-label-row div {
                    padding: 0;
                    margin: 0 0 4px 4px;
                }

                .list-label-row label {
                    margin-top: 24px;
                }

                fieldset {
                    border-radius: 3px;
                    border: 1px solid;
                    padding: 10px;
                }

                fieldset label {
                    display: block;
                    padding-top: 5px;
                }

                fieldset .inline-label {
                    display: unset;
                    font-weight: normal;
                    padding-left: 5px;
                }

                input[type="text"], textarea {
                    border: 1px solid var(--theme-color-tertiary-darkest);
                    border-radius: 3px;
                    height: 35px;
                    color: var(--theme-color-tertiary-darkest);
                    background-color: var(--theme-color-tertiary-lighter);
                    display: block;
                    padding: 0 5px 0 5px;
                }

                input[type="text"][disabled], textarea[disabled] {
                    background-color: rgb(from var(--theme-color-tertiary-lighter) r g b / 25%);
                    border-color: rgb(from var(--theme-color-tertiary-darkest) r g b / 25%);
                }

                input[type="text"]::placeholder, textarea::placeholder {
                    color: var(--theme-color-tertiary-darker);
                }

                input[type="text"][disabled]::placeholder, textarea[disabled]::placeholder {
                    color: rgb(from var(--theme-color-tertiary-darker) r g b / 25%);
                }

                input[type="text"]:focus, textarea:focus {
                    background-color: var(--theme-color-tertiary-lightest);
                    border: 1px solid var(--theme-color-tertiary-darkest);
                }

                input[type="text"]:not([disabled]):hover, textarea:not([disabled]):hover {
                    box-shadow: var(--theme-color-tertiary-lightest) 1px 1px 3px 0 inset, var(--theme-color-tertiary-lightest) -1px -1px 3px 0 inset;
                }

                .radio-button-2 {
                    display: flex;
                    align-items: center;
                    position: relative;
                    padding-left: 30px;
                    cursor: pointer;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                }

                .radio-button-2 input {
                    position: absolute;
                    opacity: 0;
                    cursor: pointer;
                    height: 0;
                    width: 0;
                }

                .radio-button-2 .checkmark {
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    left: 0;
                    height: 20px;
                    width: 20px;
                    border-radius: 50%;
                    border: 1px solid;
                    background-color: var(--theme-color-tertiary-lightest);
                    border-color: var(--theme-color-tertiary-darkest);
                }

                .radio-button-2:hover input ~ .checkmark {
                    box-shadow: var(--theme-color-tertiary-lighter) 1px 1px 3px 0, var(--theme-color-tertiary-lighter) -1px -1px 3px 0;
                }

                .radio-button-2 input:checked ~ .checkmark {
                    background-color: var(--theme-color-tertiary-lighter);
                }

                .checkmark:after {
                    content: "";
                    position: absolute;
                    display: none;
                }

                .radio-button-2 input:checked ~ .checkmark:after {
                    display: block;
                }

                .radio-button-2 .checkmark:after {
                    top: 5px;
                    left: 5px;
                    width: 8px;
                    height: 8px;
                    border-radius: 50%;
                    background-color: var(--theme-color-tertiary-darkest);
                }

                input[type="number"] {
                    border: 1px solid var(--theme-color-tertiary-darkest);
                    border-radius: 3px;
                    height: 35px;
                    color: var(--theme-color-tertiary-darkest);
                    background-color: var(--theme-color-tertiary-lighter);
                    padding: 0 5px 0 5px;
                    text-align: center;
                    width: 75px;
                }

                textarea {
                    width: 100%;
                    height: 75px;
                    white-space: pre-wrap;
                }

                .checkbox-2 {
                    display: flex;
                    align-items: center;
                    position: relative;
                    padding-left: 30px;
                    cursor: pointer;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                }

                .checkbox-2 input {
                    position: absolute;
                    opacity: 0;
                    cursor: pointer;
                    height: 0;
                    width: 0;
                }

                .checkbox-2 .checkmark {
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    left: 0;
                    height: 20px;
                    width: 20px;
                    border: 1px solid;
                    background-color: var(--theme-color-tertiary-lightest);
                    border-color: var(--theme-color-tertiary-darkest);
                }

                .checkbox-2:hover input ~ .checkmark {
                    box-shadow: var(--theme-color-tertiary-lightest) 1px 1px 3px 0, var(--theme-color-tertiary-lightest) -1px -1px 3px 0;
                }

                .checkbox-2 input:checked ~ .checkmark {
                    background-color: var(--theme-color-tertiary-lighter);
                }

                .checkbox-2 input:checked ~ .checkmark:after {
                    display: block;
                }

                .checkbox-2 .checkmark:after {
                    top: 5px;
                    left: 5px;
                    width: 8px;
                    height: 8px;
                    background-color: var(--theme-color-tertiary-darkest);
                }

                fieldset[disabled],
                fieldset[disabled] input,
                fieldset[disabled] textarea,
                fieldset[disabled] .radio-button-2 .checkmark,
                fieldset[disabled] .checkbox-2 .checkmark {
                    background-color: rgba(0, 0, 0, 0.1);
                }

                .validation-message {
                    font-weight: normal;
                    color: var(--theme-color-complementary-darker);
                }
            }
        </style>
        <header class="surface-tertiary">
            <div class="icon-container">
                <kit-component data-kit-template-path="/resources/icons/tool-palette.html" data-kit-model="null"></kit-component>
            </div>
            <div>
                <h1>Edit tool palettes</h1>
            </div>
            <div class="spacer"></div>
            <div>
                <button title="Close" class="action-text" onclick="#model.closeDialog();">
                    <div class="icon-container">
                        <kit-component data-kit-template-path="/resources/icons/file-close.html" data-kit-model="null"></kit-component>
                    </div>
                </button>
            </div>
        </header>
        <section>
            <!-- content starts here -->
            <div id="top-details-list" class="details-list">
                <details id="details-tool-palettes" ontoggle="#model.onDetailsToggleEvent(event)">
                    <summary class="action-control">Tool palettes</summary>
                    <div class="details-list-2">
                        <details id="details-tool-palettes-editing-tools" ontoggle="#model.onDetailsToggleEvent(event)">
                            <summary class="action-control">Editing tools</summary>
                            <section class="detail-section">
                                <div>
                                    <label>Current palette</label>
                                    <div id="current-editing-tools" class="item-list" ondragover="#model.allowDrop(event)" ondrop="#model.dropAvailableItem(event, 'EditingTools')">
                                        <!-- dynamic content here -->
                                        <kit-array data-kit-array="#model.getToolPalettes('EditingTools')" data-kit-array-ref="palettes" data-kit-item-index-ref="paletteIndex">
                                            <div>
                                                <kit-array data-kit-array="#model.getToolPaletteItems('EditingTools', #paletteIndex)" data-kit-item-ref="tool">
                                                    <button id="%{#tool.id}%"
                                                            class="tool-button action-control editing-tool-button"
                                                            title="%{#tool.data.ref.name}%"
                                                            draggable="true"
                                                            ondragstart="#model.dragItem(event)">
                                                        <svg data-tool-thumbnail="%{#tool.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#tool.data.thumbnailSrc}%</svg>
                                                    </button>
                                                </kit-array>
                                            </div>
                                        </kit-array>
                                        <!-- end dynamic content -->
                                    </div>
                                </div>
                                <div>
                                    <label>Available tools</label>
                                    <div class="item-list" ondragover="#model.allowDrop(event)" ondrop="#model.dropPaletteItem(event, 'EditingTools')">
                                        <!-- dynamic content here -->
                                        <kit-array data-kit-array="#model.getAvailableItems('EditingTools')" data-kit-array-ref="tools" data-kit-item-ref="tool" data-kit-item-index-ref="toolIndex">
                                            <div id="%{#tool.elementId}%" class="action-control available-item" draggable="true" ondragstart="#model.dragItem(event)">
                                                <div class="icon-container">
                                                    <svg data-tool-thumbnail="%{#tool.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#tool.thumbnailSrc}%</svg>
                                                </div>
                                                <div>
                                                    <label>%{#tool.name}%</label>
                                                </div>
                                                <div class="spacer"></div>
                                                <div class="secondary-info">
                                                    <label>%{#tool.referenceTypeLabel}%</label>
                                                    <label>%{#tool.versionLabel}%</label>
                                                </div>
                                                <div class="move-container">
                                                    <button title="Move" class="action-text" onclick="#model.dragStartItem(event, #tool.elementId);">
                                                        <div class="icon-container">
                                                            <kit-component data-kit-template-path="/resources/icons/move.html" data-kit-model="null"></kit-component>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </kit-array>
                                        <!-- end dynamic content -->
                                    </div>
                                    <div>
                                        <a title="Manage tools" class="action-text" onclick="#model.openToolsSection()">Manage tools</a>
                                    </div>
                                </div>
                            </section>
                        </details>
                        <details id="details-tool-palettes-drawing-tools" ontoggle="#model.onDetailsToggleEvent(event)">
                            <summary class="action-control">Drawing tools</summary>
                            <section class="detail-section">
                                <div>
                                    <label>Current palette</label>
                                    <div id="current-drawing-tools" class="item-list" ondragover="#model.allowDrop(event)" ondrop="#model.dropAvailableItem(event, 'DrawingTools')">
                                        <!-- dynamic content here -->
                                        <kit-array data-kit-array="#model.getToolPalettes('DrawingTools')" data-kit-array-ref="palettes" data-kit-item-index-ref="paletteIndex">
                                            <div>
                                                <kit-array data-kit-array="#model.getToolPaletteItems('DrawingTools', #paletteIndex)" data-kit-item-ref="tool">
                                                    <button id="%{#tool.id}%"
                                                            class="tool-button action-control drawing-tool-button"
                                                            title="%{#tool.data.ref.name}%"
                                                            draggable="true"
                                                            ondragstart="#model.dragItem(event)">
                                                        <svg data-tool-thumbnail="%{#tool.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#tool.data.thumbnailSrc}%</svg>
                                                    </button>
                                                </kit-array>
                                            </div>
                                        </kit-array>
                                        <!-- end dynamic content -->
                                    </div>
                                </div>
                                <div>
                                    <label>Available tools</label>
                                    <div class="item-list" ondragover="#model.allowDrop(event)" ondrop="#model.dropPaletteItem(event, 'DrawingTools')">
                                        <!-- dynamic content here -->
                                        <kit-array data-kit-array="#model.getAvailableItems('DrawingTools')" data-kit-array-ref="tools" data-kit-item-ref="tool" data-kit-item-index-ref="toolIndex">
                                            <div id="%{#tool.elementId}%" class="action-control available-item" draggable="true" ondragstart="#model.dragItem(event)">
                                                <div class="icon-container">
                                                    <svg data-tool-thumbnail="%{#tool.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#tool.thumbnailSrc}%</svg>
                                                </div>
                                                <div>
                                                    <label>%{#tool.name}%</label>
                                                </div>
                                                <div class="spacer"></div>
                                                <div class="secondary-info">
                                                    <label>%{#tool.referenceTypeLabel}%</label>
                                                    <label>%{#tool.versionLabel}%</label>
                                                </div>
                                                <div class="move-container">
                                                    <button title="Move" class="action-text" onclick="#model.dragStartItem(event, #tool.elementId);">
                                                        <div class="icon-container">
                                                            <kit-component data-kit-template-path="/resources/icons/move.html" data-kit-model="null"></kit-component>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </kit-array>
                                        <!-- end dynamic content -->
                                    </div>
                                    <div>
                                        <a title="Manage tools" class="action-text" onclick="#model.openToolsSection()">Manage tools</a>
                                    </div>
                                </div>
                            </section>
                        </details>
                        <details id="details-tool-palettes-map-item-templates" ontoggle="#model.onDetailsToggleEvent(event)">
                            <summary class="action-control">Map item templates</summary>
                            <section class="detail-section">
                                <div>
                                    <label>Current palette</label>
                                    <div id="current-map-item-templates" class="item-list" ondragover="#model.allowDrop(event)" ondrop="#model.dropAvailableItem(event, 'MapItemTemplates')">
                                        <!-- dynamic content here -->
                                        <kit-array data-kit-array="#model.getToolPalettes('MapItemTemplates')" data-kit-array-ref="palettes" data-kit-item-index-ref="paletteIndex">
                                            <div>
                                                <kit-array data-kit-array="#model.getToolPaletteItems('MapItemTemplates', #paletteIndex)" data-kit-item-ref="tool">
                                                    <button id="%{#tool.id}%"
                                                            class="tool-button action-control drawing-tool-button"
                                                            title="%{#tool.data.ref.name}%"
                                                            draggable="true"
                                                            ondragstart="#model.dragItem(event)">
                                                        <svg data-map-item-template-thumbnail="%{#tool.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#tool.data.thumbnailSrc}%</svg>
                                                    </button>
                                                </kit-array>
                                            </div>
                                        </kit-array>
                                        <!-- end dynamic content -->
                                    </div>
                                </div>
                                <div>
                                    <label>Available map item templates</label>
                                    <div class="item-list" ondragover="#model.allowDrop(event)" ondrop="#model.dropPaletteItem(event, 'MapItemTemplates')">
                                        <!-- dynamic content here -->
                                        <kit-array data-kit-array="#model.getAvailableItems('MapItemTemplates')" data-kit-array-ref="mapItemTemplates" data-kit-item-ref="mapItemTemplate" data-kit-item-index-ref="mapItemTemplateIndex">
                                            <div id="%{#mapItemTemplate.elementId}%" class="action-control available-item" draggable="true" ondragstart="#model.dragItem(event)">
                                                <div class="icon-container">
                                                    <svg data-map-item-template-thumbnail="%{#mapItemTemplate.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#mapItemTemplate.thumbnailSrc}%</svg>
                                                </div>
                                                <div>
                                                    <label>%{#mapItemTemplate.name}%</label>
                                                </div>
                                                <div class="spacer"></div>
                                                <div class="secondary-info">
                                                    <label>%{#mapItemTemplate.referenceTypeLabel}%</label>
                                                </div>
                                                <div class="move-container">
                                                    <button title="Move" class="action-text" onclick="#model.dragStartItem(event, #mapItemTemplate.elementId);">
                                                        <div class="icon-container">
                                                            <kit-component data-kit-template-path="/resources/icons/move.html" data-kit-model="null"></kit-component>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </kit-array>
                                        <!-- end dynamic content -->
                                    </div>
                                    <div>
                                        <a title="Manage map item templates" class="action-text" onclick="#model.openMapItemTemplatesSection()">Manage map item templates</a>
                                    </div>
                                </div>
                            </section>
                        </details>
                    </div>
                </details>
                <details id="details-tools" ontoggle="#model.onDetailsToggleEvent(event)">
                    <summary class="action-control">Tools</summary>
                    <section>
                        <div class="list-label-row">
                            <label>Tools:</label>
                            <div class="spacer"></div>
                            <div>
                                <button id="add-tool-button" title="Add tool" class="action-control" onclick="#model.addTool();">
                                    <div class="icon-container">
                                        <kit-component data-kit-template-path="/resources/icons/add.html" data-kit-model="null"></kit-component>
                                    </div>
                                </button>
                            </div>
                            <div>
                                <button id="delete-tool-button" title="Delete tool" class="action-control" onclick="#model.deleteTool();" disabled>
                                    <div class="icon-container">
                                        <kit-component data-kit-template-path="/resources/icons/delete.html" data-kit-model="null"></kit-component>
                                    </div>
                                </button>
                            </div>
                        </div>
                        <div class="item-list tools-list">
                            <!-- dynamic content here -->
                            <kit-array data-kit-array="#model.getTools()" data-kit-array-ref="tools" data-kit-item-ref="tool" data-kit-item-index-ref="toolIndex">
                                <div id="%{#tool.elementId}%" class="tool-item" onclick="#model.selectTool(#tool.elementId)">
                                    <div class="icon-container">
                                        <svg data-tool-thumbnail="%{#tool.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#tool.thumbnailSrc}%</svg>
                                    </div>
                                    <div>
                                        <label>%{#tool.name}%</label>
                                        <div class="secondary-info">
                                            <label>%{#tool.toolTypeLabel}%</label>
                                        </div>
                                    </div>
                                    <div class="spacer"></div>
                                    <div class="secondary-info">
                                        <label>%{#tool.referenceTypeLabel}%</label>
                                        <label>%{#tool.versionLabel}%</label>
                                    </div>
                                </div>
                            </kit-array>
                            <!-- end dynamic content -->
                        </div>
                        <div class="surface-tertiary background">
                            <kit-if id="currentToolForm" data-kit-condition="#model.hasCurrentTool()">
                                <kit-component 
                                    data-kit-template-path="/components/map-editor/tool-palette-dialog/tool-view/tool-view.html"
                                    data-kit-model-input="{ tool: #model.getCurrentTool() }">
                                </kit-component>
                            </kit-if>
                        </div>
                    </section>
                </details>
                <details id="details-map-item-templates" ontoggle="#model.onDetailsToggleEvent(event)">
                    <summary class="action-control">Map item templates</summary>
                    <section>
                        <div class="list-label-row">
                            <label>Map item templates:</label>
                            <div class="spacer"></div>
                            <div>
                                <button id="add-map-item-template-button" title="Add map item template" class="action-control" onclick="#model.addMapItemTemplate();">
                                    <div class="icon-container">
                                        <kit-component data-kit-template-path="/resources/icons/add.html" data-kit-model="null"></kit-component>
                                    </div>
                                </button>
                            </div>
                            <div>
                                <button id="delete-map-item-template-button" title="Delete map item template" class="action-control" onclick="#model.deleteMapItemTemplate();" disabled>
                                    <div class="icon-container">
                                        <kit-component data-kit-template-path="/resources/icons/delete.html" data-kit-model="null"></kit-component>
                                    </div>
                                </button>
                            </div>
                        </div>
                        <div class="item-list map-item-templates-list">
                            <!-- dynamic content here -->
                            <kit-array data-kit-array="#model.getMapItemTemplates()" data-kit-array-ref="mapItemTemplates" data-kit-item-ref="mapItemTemplate" data-kit-item-index-ref="mapItemTemplateIndex">
                                <div id="%{#mapItemTemplate.elementId}%" class="map-item-template-item" onclick="#model.selectMapItemTemplate(#mapItemTemplate.elementId)">
                                    <div class="icon-container">
                                        <svg data-map-item-template-thumbnail="%{#mapItemTemplate.elementId}%" height="25" width="25" viewBox="0 0 100 100">%{#mapItemTemplate.thumbnailSrc}%</svg>
                                    </div>
                                    <div>
                                        <label>%{#mapItemTemplate.name}%</label>
                                    </div>
                                    <div class="spacer"></div>
                                    <div class="secondary-info">
                                        <label>%{#mapItemTemplate.referenceTypeLabel}%</label>
                                        <label>%{#mapItemTemplate.versionLabel}%</label>
                                    </div>
                                </div>
                            </kit-array>
                            <!-- end dynamic content -->
                        </div>
                        <div class="surface-tertiary background">
                            <kit-if id="currentMapItemTemplateForm" data-kit-condition="#model.hasCurrentMapItemTemplate()">
                                <kit-component 
                                    data-kit-template-path="/components/map-editor/tool-palette-dialog/map-item-template-view/map-item-template-view.html"
                                    data-kit-model-input="{ mapItemTemplate: #model.getCurrentMapItemTemplate(), dialogModel: #model }">
                                </kit-component>
                            </kit-if>
                        </div>
                    </section>
                </details>
            </div>
            <!-- content ends here -->
        </section>
    </kit-if>
</dialog>
